{"ast":null,"code":"'use strict';\n\nmodule.exports = function (newState) {\n  var _this = this;\n\n  // Prevent transitioning to the same state\n  if (this.activeState === newState) {\n    return;\n  }\n\n  // Setting the good properties for the transition\n  if (!this.isPaused) {\n    this.isPaused = true;\n    this.pause();\n  }\n  this.channelsIndex = -1;\n  this.activetransitionSpeed = this.stateTransitionSpeed;\n  this.activeColorsDiff = [];\n  this.activeColorsPosDiff = [];\n  this.activeColors = this.getCurrentColors();\n  this.activeColorsPos = this.getCurrentColorsPos();\n  this.progress = 0;\n  this.previousTimeStamp = null;\n  this.isChangingState = true;\n\n  // Compute the gradient color and pos diff between the last frame gradient\n  // and the first one of the new state\n  this.states[newState].gradients[0].forEach(function (gradientColor, i, arr) {\n    var nextColors = _this.convertColorToRgba(_this.getColor(gradientColor));\n    var nextColorsPos = _this.getColorPos(gradientColor, i);\n    var colorDiff = _this.getColorDiff(_this.activeColors[i], nextColors);\n    var colorPosDiff = _this.getColorPosDiff(_this.activeColorsPos[i], nextColorsPos);\n    _this.activeColorsDiff.push(colorDiff);\n    _this.activeColorsPosDiff.push(colorPosDiff);\n  });\n\n  // Start the animation\n  this.activeState = newState;\n  this.play();\n};","map":{"version":3,"names":["module","exports","newState","_this","activeState","isPaused","pause","channelsIndex","activetransitionSpeed","stateTransitionSpeed","activeColorsDiff","activeColorsPosDiff","activeColors","getCurrentColors","activeColorsPos","getCurrentColorsPos","progress","previousTimeStamp","isChangingState","states","gradients","forEach","gradientColor","i","arr","nextColors","convertColorToRgba","getColor","nextColorsPos","getColorPos","colorDiff","getColorDiff","colorPosDiff","getColorPosDiff","push","play"],"sources":["D:/eci/web/node_modules/granim/lib/changeState.js"],"sourcesContent":["'use strict';\r\n\r\nmodule.exports = function(newState) {\r\n\tvar _this = this;\r\n\r\n\t// Prevent transitioning to the same state\r\n\tif (this.activeState === newState) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Setting the good properties for the transition\r\n\tif (!this.isPaused) {\r\n\t\tthis.isPaused = true;\r\n\t\tthis.pause();\r\n\t}\r\n\r\n\tthis.channelsIndex = -1;\r\n\tthis.activetransitionSpeed = this.stateTransitionSpeed;\r\n\tthis.activeColorsDiff = [];\r\n\tthis.activeColorsPosDiff = [];\r\n\tthis.activeColors = this.getCurrentColors();\r\n\tthis.activeColorsPos = this.getCurrentColorsPos();\r\n\tthis.progress = 0;\r\n\tthis.previousTimeStamp = null;\r\n\tthis.isChangingState = true;\r\n\r\n\t// Compute the gradient color and pos diff between the last frame gradient\r\n\t// and the first one of the new state\r\n\tthis.states[newState].gradients[0].forEach(function(gradientColor, i, arr) {\r\n\t\tvar nextColors = _this.convertColorToRgba(_this.getColor(gradientColor));\r\n\t\tvar nextColorsPos = _this.getColorPos(gradientColor, i);\r\n\t\tvar colorDiff = _this.getColorDiff(_this.activeColors[i], nextColors);\r\n\t\tvar colorPosDiff = _this.getColorPosDiff(_this.activeColorsPos[i], nextColorsPos);\r\n\t\t_this.activeColorsDiff.push(colorDiff);\r\n\t\t_this.activeColorsPosDiff.push(colorPosDiff);\r\n\t});\r\n\r\n\t// Start the animation\r\n\tthis.activeState = newState;\r\n\tthis.play();\r\n};\r\n"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,OAAO,GAAG,UAASC,QAAQ,EAAE;EACnC,IAAIC,KAAK,GAAG,IAAI;;EAEhB;EACA,IAAI,IAAI,CAACC,WAAW,KAAKF,QAAQ,EAAE;IAClC;EACD;;EAEA;EACA,IAAI,CAAC,IAAI,CAACG,QAAQ,EAAE;IACnB,IAAI,CAACA,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,KAAK,CAAC,CAAC;EACb;EAEA,IAAI,CAACC,aAAa,GAAG,CAAC,CAAC;EACvB,IAAI,CAACC,qBAAqB,GAAG,IAAI,CAACC,oBAAoB;EACtD,IAAI,CAACC,gBAAgB,GAAG,EAAE;EAC1B,IAAI,CAACC,mBAAmB,GAAG,EAAE;EAC7B,IAAI,CAACC,YAAY,GAAG,IAAI,CAACC,gBAAgB,CAAC,CAAC;EAC3C,IAAI,CAACC,eAAe,GAAG,IAAI,CAACC,mBAAmB,CAAC,CAAC;EACjD,IAAI,CAACC,QAAQ,GAAG,CAAC;EACjB,IAAI,CAACC,iBAAiB,GAAG,IAAI;EAC7B,IAAI,CAACC,eAAe,GAAG,IAAI;;EAE3B;EACA;EACA,IAAI,CAACC,MAAM,CAACjB,QAAQ,CAAC,CAACkB,SAAS,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,UAASC,aAAa,EAAEC,CAAC,EAAEC,GAAG,EAAE;IAC1E,IAAIC,UAAU,GAAGtB,KAAK,CAACuB,kBAAkB,CAACvB,KAAK,CAACwB,QAAQ,CAACL,aAAa,CAAC,CAAC;IACxE,IAAIM,aAAa,GAAGzB,KAAK,CAAC0B,WAAW,CAACP,aAAa,EAAEC,CAAC,CAAC;IACvD,IAAIO,SAAS,GAAG3B,KAAK,CAAC4B,YAAY,CAAC5B,KAAK,CAACS,YAAY,CAACW,CAAC,CAAC,EAAEE,UAAU,CAAC;IACrE,IAAIO,YAAY,GAAG7B,KAAK,CAAC8B,eAAe,CAAC9B,KAAK,CAACW,eAAe,CAACS,CAAC,CAAC,EAAEK,aAAa,CAAC;IACjFzB,KAAK,CAACO,gBAAgB,CAACwB,IAAI,CAACJ,SAAS,CAAC;IACtC3B,KAAK,CAACQ,mBAAmB,CAACuB,IAAI,CAACF,YAAY,CAAC;EAC7C,CAAC,CAAC;;EAEF;EACA,IAAI,CAAC5B,WAAW,GAAGF,QAAQ;EAC3B,IAAI,CAACiC,IAAI,CAAC,CAAC;AACZ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}